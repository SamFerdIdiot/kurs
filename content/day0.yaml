# ДЕНЬ 0: УРОКИ ДОРОГИ
# YAML спецификация контента (используется как документация)
# Реализация: src/Notebook/NotebookScene.cpp

# ============================================================================
# ENTRY 1: Стук в дверь (вступление)
# ============================================================================
- id: day0_knock
  type: PAST
  text: |
    Стук в дверь разбудил меня на рассвете. Я открыл глаза — серый потолок хрущёвки,
    шесть утра по будильнику на тумбочке.

    — Денис Петрович, — донёсся хриплый голос с лестничной клетки. — Открывай. Я знаю, ты не спишь.

    Я поднялся, натянул свитер и открыл дверь. На пороге стоял старый сосед — механик с соседнего завода.

    — Приготовь «Москвич». Завтра тебе в путь.

    Я не успел спросить куда, как он протянул мне потрёпанную записную книжку.

    — Записывай всё. Дорога — лучший учитель, но только для тех, кто помнит уроки.

  choices:
    - text: "Принять блокнот"
      next: day0_volga
      resources: {}

# ============================================================================
# ENTRY 2: Волга
# ============================================================================
- id: day0_volga
  type: PAST
  text: |
    Через час я уже стоял в гараже напротив своего «Москвича-2141». Рядом — старая белая «Волга»,
    покрытая пылью.

    — Твоя машина не доедет до границы, — сказал Денис Петрович, открывая капот «Волги». —
    Но если научишься её слушать, она довезёт тебя хоть до Берлина.

    Он протянул мне ключи.

    — Садись. Сегодня первый урок.

  choices:
    - text: "Сесть за руль"
      next: day0_first_task
      resources: {}

# ============================================================================
# ENTRY 3: Первая задача (выбор подхода)
# ============================================================================
- id: day0_first_task
  type: PAST
  text: |
    — Доберись до старой водонапорной башни на окраине города, — сказал Денис Петрович,
    указывая на карту. — Но не по трассе. Найди свой путь.

    Я посмотрел на карту. Четыре разных подхода к задаче:

    А) Изучить карту досконально, понять логику дорог
    Б) Положиться на интуицию, почувствовать машину
    В) Спросить у тех, кто знает эти места
    Г) Найти кратчайший путь, сэкономить ресурсы

    Что важнее — система или чутьё? Люди или эффективность?

  choices:
    # Ветка А: Системный подход
    - text: "А) Изучить карту и схему дорог"
      next: day0_branch_a_map
      effects:
        - type: trait
          value: analytical

    # Ветка Б: Интуитивный подход
    - text: "Б) Почувствовать машину и дорогу"
      next: day0_branch_b_engine
      effects:
        - type: trait
          value: intuitive

    # Ветка В: Социальный подход
    - text: "В) Спросить у местных водителей"
      next: day0_branch_c_truck
      effects:
        - type: trait
          value: social

    # Ветка Г: Практичный подход
    - text: "Г) Рассчитать оптимальный маршрут"
      next: day0_branch_d_route
      effects:
        - type: trait
          value: practical

# ============================================================================
# ВЕТКА А: Системный анализ (Понимание контекста)
# ============================================================================
- id: day0_branch_a_map
  type: PAST
  text: |
    Я разложил карту на капоте. Денис Петрович молча наблюдал, как я вычерчиваю возможные маршруты.

    — Видишь развилку у моста? — он ткнул пальцем в карту. — Если поедешь направо — попадёшь на стройку.
    Налево — объезд через посёлок. Но есть третий путь.

    Он указал на едва заметную линию между домами.

    — Старая объездная. Её нет на новых картах, но она работает. Это и есть первый урок:
    карта показывает что есть, но не показывает что работает. Нужно понимать КОНТЕКСТ.

  choices:
    - text: "Понял. Контекст важнее схемы."
      next: day0_branch_a_geologist
      resources: {}

- id: day0_branch_a_geologist
  type: PAST
  text: |
    Мы поехали по старой объездной. Машина шла ровно, дорога была пустой.

    Вдруг Денис Петрович попросил остановиться у обочины. Там стоял пожилой человек с геологическим молотком.

    — Привет, Михалыч, — поздоровался Денис Петрович. — Покажи парню свой журнал.

    Геолог протянул мне потрёпанную тетрадь в кожаной обложке. Внутри — карты, заметки, схемы местности.

    — Я записываю всё, — сказал он. — Где нашёл породу, где вода, где старые дороги.
    Без записей я бы забыл. А так — всегда знаю контекст.

    Денис Петрович кивнул:

    — Можешь взять журнал. Или возьми деньги — он готов продать. Но помни: знания дороже денег.

  choices:
    - text: "Взять журнал (получить артефакт)"
      next: day0_provocation
      effects:
        - type: story_item
          value: technical_journal
        - type: principle
          value: understanding_context

    - text: "Взять деньги (+200₽)"
      next: day0_provocation
      resources:
        money: 200
      effects:
        - type: principle
          value: understanding_context

# ============================================================================
# ВЕТКА Б: Слушать материал (Чувство машины)
# ============================================================================
- id: day0_branch_b_engine
  type: PAST
  text: |
    Я завёл мотор и прислушался. Денис Петрович положил руку мне на плечо.

    — Слышишь? — спросил он. — Двигатель работает неровно. Четвёртый цилиндр пропускает такт.

    Я не слышал ничего особенного, но старик был прав — через минуту машина начала троить.

    — Машина говорит с тобой, — продолжил он. — Но на своём языке. Вибрация, звук, запах —
    это её слова. Научись СЛУШАТЬ МАТЕРИАЛ, и она расскажет тебе всё.

    Мы остановились у гаража. Денис Петрович открыл капот и показал на свечу зажигания.

    — Попробуй сам. Почувствуй металл.

  choices:
    - text: "Продолжить урок"
      next: day0_branch_b_blacksmith
      resources: {}

- id: day0_branch_b_blacksmith
  type: PAST
  text: |
    Мы заехали в небольшую кузницу на окраине. Там работал старый кузнец — друг Дениса Петровича.

    — Металл помнит, — сказал кузнец, нагревая заготовку. — Если перегреть — сломается.
    Если недогреть — не примет форму. Нужно чувствовать температуру.

    Он протянул мне клещи.

    — Можешь попробовать. Но будь осторожен — если не почувствуешь момент, обожжёшься.

    Денис Петрович молча наблюдал. Это был тест.

  choices:
    - text: "Попробовать и обжечься (получить артефакт)"
      next: day0_provocation
      resources:
        energy: -5
      effects:
        - type: story_item
          value: burned_finger
        - type: principle
          value: listen_material

    - text: "Попросить кузнеца показать ещё раз"
      next: day0_provocation
      effects:
        - type: principle
          value: listen_material

# ============================================================================
# ВЕТКА В: Спроси бывалого (Командная работа)
# ============================================================================
- id: day0_branch_c_truck
  type: PAST
  text: |
    Мы остановились у придорожного кафе. Денис Петрович кивнул на старый грузовик у обочины.

    — Видишь? Дальнобойщик. Сломался.

    Я подошёл к водителю. Тот сидел на корточках у переднего колеса, разглядывая тормозной диск.

    — Проблемы? — спросил я.

    — Колодки стёрлись, — буркнул он. — До города не дотяну. А мне сегодня груз сдавать.

    Денис Петрович подошёл сзади.

    — У тебя в багажнике есть старые колодки от «Волги». Подойдут ему. Можешь помочь —
    или просто пройти мимо. Но запомни: на дороге ты никогда не один. И рано или поздно
    помощь вернётся. Это урок: СПРОСИ БЫВАЛОГО, и помоги, когда можешь.

  choices:
    - text: "Помочь с ремонтом"
      next: day0_branch_c_teahouse
      resources:
        energy: -10
      effects:
        - type: principle
          value: ask_experienced

- id: day0_branch_c_teahouse
  type: PAST
  text: |
    Через час ремонт был закончен. Дальнобойщик пожал мне руку.

    — Спасибо, парень. Если что — звони, — он протянул визитку. — Номер рабочий.
    А если поедешь на запад — заезжай в чайную у трассы, спроси Петровича. Скажешь, что от меня.

    Денис Петрович усмехнулся.

    — Видишь? Ты помог — и уже получил контакт. На дороге связи важнее денег.
    Можешь взять его номер, или попроси сфотографироваться на память — он не откажет.

  choices:
    - text: "Взять фотографию у грузовика (получить артефакт)"
      next: day0_provocation
      effects:
        - type: story_item
          value: photo_at_machine

    - text: "Записать номер телефона"
      next: day0_provocation
      effects: []

# ============================================================================
# ВЕТКА Г: Ресурсоэффективность (Быстро и по делу)
# ============================================================================
- id: day0_branch_d_route
  type: PAST
  text: |
    Я посмотрел на карту и быстро прикинул:

    — Если поехать через промзону, сэкономим 15 минут и 3 литра бензина. Дорога хуже, но короче.

    Денис Петрович кивнул.

    — Правильно. Но помни: эффективность — это не только скорость. Это умение выжать максимум
    из того, что есть. РЕСУРСОЭФФЕКТИВНОСТЬ — считать не только километры, но и время, топливо,
    износ машины.

    Мы поехали через промзону. Дорога была разбитая, но пустая.

  choices:
    - text: "Продолжить путь"
      next: day0_branch_d_boys
      resources: {}

- id: day0_branch_d_boys
  type: PAST
  text: |
    У старого завода мы увидели мальчишек. Они разбирали гору металлолома.

    — Дядь, возьмёте стартер? — крикнул один из них. — Рабочий, с «Жигулей». Сотку дадите?

    Денис Петрович остановился.

    — Смотри, — сказал он мне. — У тебя стартер работает. Зачем тебе запасной?
    Но если в пути сломается — новый будет стоить пятьсот. А тут сотня. Это и есть ресурсоэффективность:
    предусмотреть проблему ДО того, как она случится.

  choices:
    - text: "Купить стартер за 100₽ (получить артефакт)"
      next: day0_provocation
      resources:
        money: -100
      effects:
        - type: story_item
          value: spare_starter
        - type: principle
          value: resource_efficient

    - text: "Отказаться (сэкономить деньги)"
      next: day0_provocation
      effects:
        - type: principle
          value: resource_efficient

# ============================================================================
# ENTRY: Провокация (общая для всех веток)
# ============================================================================
- id: day0_provocation
  type: PAST
  text: |
    На обратном пути к гаражу нас остановил патруль ДПС. Молодой лейтенант вышел из машины.

    — Документы, — буркнул он, даже не поздоровавшись.

    Денис Петрович молча протянул права. Лейтенант придирчиво их изучил, потом посмотрел на меня.

    — А ты кто? Где твои права?

    Я начал было объяснять, что еду как пассажир, но он перебил:

    — Заткнись. Я не спрашивал твоё мнение.

    Денис Петрович положил руку мне на плечо — знак молчать. Но внутри у меня закипало.
    Хотелось огрызнуться.

  choices:
    - text: "Сдержаться, промолчать (терпение)"
      next: day0_garage_finale
      effects:
        - type: trait
          value: patient

    - text: "Огрызнуться (импульсивность)"
      next: day0_garage_finale
      resources:
        money: -200  # Штраф за грубость
      effects:
        - type: trait
          value: impulsive

# ============================================================================
# ENTRY: Финал в гараже (общий для всех)
# ============================================================================
- id: day0_garage_finale
  type: PAST
  text: |
    Вечером мы вернулись в гараж. Денис Петрович поставил чайник на керогаз.

    — Запомни сегодня, — сказал он, доставая из шкафчика старый инструмент. —
    Дорога научит тебя всему, но только если ты готов учиться.

    Он протянул мне разводной ключ.

    — Это тебе. Мой первый инструмент. Пусть послужит и тебе.

    Я взял ключ. Он был тяжёлым, холодным, но каким-то правильным.

    — Спасибо, — выдавил я.

    — Не благодари. Просто помни уроки.

  choices:
    - text: "Вернуться в настоящее"
      next: day0_transition_present
      resources: {}

# ============================================================================
# ENTRY: Переход в настоящее
# ============================================================================
- id: day0_transition_present
  type: PRESENT
  text: |
    Я смотрю на этот ключ сейчас, сидя в машине на обочине трассы М1.

    Денис Петрович умер два года назад. Но его уроки остались.

    Дорога впереди. Граница через 500 километров. В кармане — 500 рублей и записная книжка.

    Пора ехать.

  choices:
    - text: "Начать путешествие"
      next: main_menu  # Переход в главное меню или День 1
      resources: {}

# ============================================================================
# МЕТАДАННЫЕ
# ============================================================================
metadata:
  total_entries: 14
  branches: 4

  principles:
    - understanding_context  # Ветка А
    - listen_material        # Ветка Б
    - ask_experienced        # Ветка В
    - resource_efficient     # Ветка Г

  traits:
    - analytical   # Выбор ветки А
    - intuitive    # Выбор ветки Б
    - social       # Выбор ветки В
    - practical    # Выбор ветки Г
    - patient      # Провокация: промолчать
    - impulsive    # Провокация: огрызнуться

  story_items:
    - technical_journal   # Ветка А: взять журнал
    - burned_finger       # Ветка Б: обжечься
    - photo_at_machine    # Ветка В: сфотографироваться
    - spare_starter       # Ветка Г: купить стартер

  estimated_playtime: "15-20 минут"
