# NodeScene Refactor - Menu-Based Interface

## Изменения

### Архитектура NodeScene изменена с driving-based на menu-based

**Старая версия (до рефакторинга):**
- Игрок управлял машиной (WASD)
- Нужно было подъезжать к структурам
- Взаимодействие по клавише E
- Сложная физика перемещения

**Новая версия (после рефакторинга):**
- Меню-интерфейс с пунктами выбора
- Навигация клавишами A/D (влево/вправо)
- Выбор клавишей Enter
- HUD внизу экрана для отображения ресурсов

### Пункты меню в NodeScene:

**Базовые пункты (всегда доступны):**
1. Карта (переход к WORLD_MAP)
2. Персонаж (TODO: создать CharacterScene)
3. Инвентарь (переход к INVENTORY)
4. Попутчики (TODO: создать CompanionsScene)
5. Задания (TODO: создать QuestsScene)
6. Древо способностей (переход к ABILITY_TREE)

**Опциональные пункты (зависят от ноды):**
7. Заправка 'Петрович' (структура)
8. Магазин 'У дороги' (структура)
9. Мотель '69' (структура)
- Больше структур по необходимости

### Управление:

- **A / Left Arrow** - Предыдущий пункт меню
- **D / Right Arrow** - Следующий пункт меню
- **Enter** - Выбрать текущий пункт
- **Escape** - Вернуться на карту мира

### UI:

- Заголовок: Название ноды (центр, сверху)
- Меню: Список пунктов (центр экрана)
  - Текущий пункт: Подсвечен синим с обводкой
  - Остальные пункты: Темно-серый фон
- Инструкция: Внизу (над HUD)
- HUD Panel: Самый низ экрана
  - Деньги
  - Топливо
  - Энергия
  - Груз (TODO: из инвентаря)

## Архивированные файлы

Следующие файлы перемещены в `archive/unused_scenes/`:
- DrivingScene.h (не реализован)
- RoadScene.h (не реализован)
- SideViewScene.h (не реализован)
- DrivingController.h (не используется)
- RoadEventManager.h (не используется)

## TODO для дальнейшей разработки:

1. **CharacterScene** - Показ информации о персонаже (уровень, опыт, архетип)
2. **CompanionsScene** - Управление попутчиками (NPC)
3. **QuestsScene** - Список активных и завершенных квестов
4. **Structure Menu Integration** - Меню структур прямо в NodeScene (без LocationScene)
5. **Travel Scene** - Сцена путешествия между нодами (side-view с машиной)
   - TODO: Реализовать как заглушку для перемещения между узлами
   - Вид сбоку (как в платформерах)
   - Машина едет вправо
   - Упрощенная анимация

## Преимущества нового подхода:

1. **Упрощение разработки** - Меню проще чем driving mechanics
2. **Меньше багов** - Нет физики, коллизий, сложной навигации
3. **Быстрая разработка** - Легко добавлять новые пункты меню
4. **Модульность** - Каждый пункт может открывать свою сцену
5. **Читаемость кода** - Понятная структура меню

## Совместимость:

Изменения **обратно несовместимы** со старой версией NodeScene.
Все сохранения и код, зависящий от driving mechanics, требуют обновления.
