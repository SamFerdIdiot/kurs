# MVP –£–ø—Ä–æ—â–µ–Ω–∏–µ - –°–µ—Å—Å–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞ ‚úÖ

## –î–∞—Ç–∞: 2025-11-29

## –í—ã–ø–æ–ª–Ω–µ–Ω–æ –≤—Å–µ 8 —ç—Ç–∞–ø–æ–≤ —É–ø—Ä–æ—â–µ–Ω–∏—è:

### ‚úÖ –≠—Ç–∞–ø 1: EndGameScene —Å–æ–∑–¥–∞–Ω
- –§–∞–π–ª—ã: `include/EndGameScene.h`, `src/EndGameScene.cpp`
- –§—É–Ω–∫—Ü–∏–∏:
  - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É: –≥–æ—Ä–æ–¥–∞ (X/5), –≤—Ä–µ–º—è –≤ –ø—É—Ç–∏
  - –ö–Ω–æ–ø–∫–∞ "Return to Menu"
  - Fade-in –∞–Ω–∏–º–∞—Ü–∏—è
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ SFML 3.x API

### ‚úÖ –≠—Ç–∞–ø 2: PlayerState —É–ø—Ä–æ—â–µ–Ω
- –û—Ç–∫–ª—é—á–µ–Ω–æ (–∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–æ —Å –º–∞—Ä–∫–µ—Ä–∞–º–∏ `[MVP]`):
  - –≠–Ω–µ—Ä–≥–∏—è (getEnergy, setEnergy, addEnergy)
  - –î–µ–Ω—å–≥–∏ (getMoney, setMoney, addMoney)
  - –¢–æ–ø–ª–∏–≤–æ (getFuel, setFuel, addFuel)
  - –°–æ—Å—Ç–æ—è–Ω–∏–µ –º–∞—à–∏–Ω—ã (vehicleCondition)
  - –¢–∏–ø—ã –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ –∏ –º–∞—à–∏–Ω—ã (Origin, CarType)
  - –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å (InventorySystem)
- –û—Å—Ç–∞–≤–ª–µ–Ω–æ —Ç–æ–ª—å–∫–æ:
  - `m_currentCityIndex` (0-4 –¥–ª—è 5 –≥–æ—Ä–æ–¥–æ–≤)
  - `m_totalPlayTime` (–≤—Ä–µ–º—è –≤ —Å–µ–∫—É–Ω–¥–∞—Ö)
  - `m_currentNodeId` (—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å)

### ‚úÖ –≠—Ç–∞–ø 3: TravelCinematicScene —É–ø—Ä–æ—â–µ–Ω
- –û—Ç–∫–ª—é—á–µ–Ω–æ:
  - –°–ª—É—á–∞–π–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è (`tryTriggerEvent`)
  - –î–∏–∞–ª–æ–≥–∏ –∫–æ–º–ø–∞–Ω—å–æ–Ω–æ–≤ (`tryTriggerDialogue`)
  - –†–∞—Å—Ö–æ–¥ —Ç–æ–ø–ª–∏–≤–∞/—ç–Ω–µ—Ä–≥–∏–∏ (`consumeResources`)
  - HUD Panel (update –∏ render)
  - Warning indicators
  - Speedometer
  - Arrival notifications
- –û—Å—Ç–∞–≤–ª–µ–Ω–æ:
  - –ü–∞—Ä–∞–ª–ª–∞–∫—Å —Ñ–æ–Ω (3 —Å–ª–æ—è: –Ω–µ–±–æ, –≥–æ—Ä—ã, –¥–µ—Ä–µ–≤—å—è, –¥–æ—Ä–æ–≥–∞)
  - –ê–Ω–∏–º–∞—Ü–∏—è –º–∞—à–∏–Ω—ã (–ø–æ–∫–∞—á–∏–≤–∞–Ω–∏–µ)
  - –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä (–∫–º / total km)
  - ESC - –±—ã—Å—Ç—Ä–æ–µ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ
  - –ê–≤—Ç–æ-–∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø—Ä–∏ progress >= 1.0

### ‚úÖ –≠—Ç–∞–ø 4: LocationScene —É–ø—Ä–æ—â–µ–Ω
- –û—Ç–∫–ª—é—á–µ–Ω–æ:
  - –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã (handleRefuel, handleShop, handleRepair, handleEat, handleRest)
  - HUD Panel
  - –°—Ç–∞—Ç—É—Å —Ä–µ—Å—É—Ä—Å–æ–≤
- –û—Å—Ç–∞–≤–ª–µ–Ω–æ:
  - –ù–∞–∑–≤–∞–Ω–∏–µ –≥–æ—Ä–æ–¥–∞
  - –ë–∞–∑–æ–≤—ã–π UI (—Ñ–æ–Ω, –æ–±—ä–µ–∫—Ç—ã)
  - –ö–Ω–æ–ø–∫–∞ "Leave" (ESC)

### ‚úÖ –≠—Ç–∞–ø 5: MapScene —É–ø—Ä–æ—â–µ–Ω –∏ –¥–æ–±–∞–≤–ª–µ–Ω —Ñ–∏–Ω–∏—à
- –û—Ç–∫–ª—é—á–µ–Ω–æ:
  - HUD Panel
- –î–æ–±–∞–≤–ª–µ–Ω–æ:
  - **5 –≥–æ—Ä–æ–¥–æ–≤**: Moscow ‚Üí N.Novgorod ‚Üí Kazan ‚Üí Ekaterinburg ‚Üí Vladivostok
  - –õ–æ–≥–∏–∫–∞ —Ñ–∏–Ω–∏—à–∞: –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ Vladivostok (city_4) ‚Üí –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ END_GAME
  - –î–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –≥–æ—Ä–æ–¥–æ–≤ ‚Üí –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ TRAVEL_CINEMATIC

### ‚úÖ –≠—Ç–∞–ø 6-7: –°–ø–∏—Å–æ–∫ –≥–æ—Ä–æ–¥–æ–≤ –∏ HUD
- –°–æ–∑–¥–∞–Ω —Å–ø–∏—Å–æ–∫ 5 –≥–æ—Ä–æ–¥–æ–≤ –≤ MapScene
- HUD —É–±—Ä–∞–Ω –∏–∑ –≤—Å–µ—Ö —Å—Ü–µ–Ω

### ‚úÖ –≠—Ç–∞–ø 8: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ –º–µ–∂–¥—É —Å—Ü–µ–Ω–∞–º–∏
- –î–æ–±–∞–≤–ª–µ–Ω `case SceneType::TRAVEL_CINEMATIC` –≤ SceneManager
- –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø–µ—Ä–µ—Ö–æ–¥—ã:
  - `TravelSelection` ‚Üí `TRAVEL_CINEMATIC`
  - `TravelCinematic` ‚Üí `LOCATION` (–≥–æ—Ä–æ–¥)
  - `Location` ‚Üí `TRAVEL_SELECTION` (–Ω–∞–∑–∞–¥ –¥–ª—è –≤—ã–±–æ—Ä–∞)
  - `MapScene` (city_4 click) ‚Üí `END_GAME`

## –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏:

1. **NodeScene** - –æ—Ç–∫–ª—é—á–µ–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
2. **CinematicEventScene** - –æ—Ç–∫–ª—é—á–µ–Ω–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
3. **AbilityTreeSystem** - –æ—Ç–∫–ª—é—á–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–µ—Å—É—Ä—Å–æ–≤
4. **EventManager** - –æ—Ç–∫–ª—é—á–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è
5. **CompanionsScene** - –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è —Ç–∏–ø–∞ –º–∞—à–∏–Ω—ã
6. **CharacterScene** - –æ—Ç–∫–ª—é—á–µ–Ω origin-based –∫–æ–Ω—Ç–µ–Ω—Ç
7. **TravelSelectionScene** - –æ—Ç–∫–ª—é—á–µ–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–æ–ø–ª–∏–≤–∞/–¥–µ–Ω–µ–≥
8. **QuestManager** - –æ—Ç–∫–ª—é—á–µ–Ω–∞ –≤—ã–¥–∞—á–∞ –¥–µ–Ω–µ–≥/–ø—Ä–µ–¥–º–µ—Ç–æ–≤
9. **SaveSystem** - –æ—Ç–∫–ª—é—á–µ–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ/–∑–∞–≥—Ä—É–∑–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤
10. **GameStateManager** - –æ—Ç–∫–ª—é—á–µ–Ω–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤

## –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å:

### ‚úÖ –ö–æ–º–ø–∏–ª—è—Ü–∏—è: –£—Å–ø–µ—à–Ω–∞
```
[100%] Built target kkurs
```

### ‚úÖ –ó–∞–ø—É—Å–∫: –†–∞–±–æ—Ç–∞–µ—Ç
–ò–≥—Ä–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ü–µ–Ω—ã.

### ‚ö†Ô∏è –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ MVP:

#### 1. üî¥ –ì–æ—Ä–æ–¥–∞ –Ω–µ —Ä–∞–∑–±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è
**–ü—Ä–æ–±–ª–µ–º–∞:** –í MapScene —Ç–æ–ª—å–∫–æ Moscow —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω (`isUnlocked = true`). –û—Å—Ç–∞–ª—å–Ω—ã–µ –≥–æ—Ä–æ–¥–∞ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã - –∏–≥—Ä–æ–∫ –Ω–µ –º–æ–∂–µ—Ç –≤—ã–±—Ä–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–π –≥–æ—Ä–æ–¥.

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –≤ MapScene:
```cpp
// –ü–æ—Å–ª–µ –ø—Ä–∏–±—ã—Ç–∏—è –≤ –≥–æ—Ä–æ–¥ - —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–π
void MapScene::unlockNextCity() {
    auto& playerState = GameStateManager::getInstance().getPlayerState();
    int currentIndex = playerState.getCurrentCityIndex();

    // –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–π –≥–æ—Ä–æ–¥
    if (currentIndex + 1 < m_nodes.size()) {
        m_nodes[currentIndex + 1].isUnlocked = true;
    }
}
```

#### 2. üî¥ PlayerState –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç currentCityIndex
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –º–µ–∂–¥—É –≥–æ—Ä–æ–¥–∞–º–∏ `m_currentCityIndex` –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è. EndGameScene –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–µ–≤–µ—Ä–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É.

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å –≤—ã–∑–æ–≤ –ø—Ä–∏ –ø—Ä–∏–±—ã—Ç–∏–∏ –≤ –≥–æ—Ä–æ–¥:
```cpp
// –í LocationScene –∏–ª–∏ TravelCinematicScene –ø–æ—Å–ª–µ –ø—Ä–∏–±—ã—Ç–∏—è
playerState.advanceToNextCity();  // m_currentCityIndex++
```

#### 3. üü° –ù–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è playtime
**–ü—Ä–æ–±–ª–µ–º–∞:** `m_totalPlayTime` –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è, EndGameScene –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç 0 —Å–µ–∫—É–Ω–¥.

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å –≤ main loop:
```cpp
// –í SceneManager::run() –∏–ª–∏ –≤ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ö
playerState.updatePlayTime(deltaTime);
```

## MVP –ì–µ–π–º–ø–ª–µ–π –ª—É–ø (—Ü–µ–ª–µ–≤–æ–π):

```
Main Menu
   ‚Üì (New Game)
Character Creation
   ‚Üì (Start Journey)
TravelSelection / MapScene  ‚Üê ‚îÄ‚îê
   ‚Üì (Select city)             ‚îÇ
TravelCinematic                ‚îÇ
   ‚Üì (Arrival)                 ‚îÇ
Location (City)                ‚îÇ
   ‚Üì (Leave / ESC)             ‚îÇ
   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚Üí ‚îò

   –ü–æ—Å–ª–µ 5 –≥–æ—Ä–æ–¥–∞ ‚Üí END_GAME
```

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ (–¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ MVP):

1. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫—É –≥–æ—Ä–æ–¥–æ–≤** (–∫—Ä–∏—Ç–∏—á–Ω–æ)
2. **–î–æ–±–∞–≤–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ cityIndex** (–∫—Ä–∏—Ç–∏—á–Ω–æ)
3. **–î–æ–±–∞–≤–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ playtime** (–≤–∞–∂–Ω–æ)
4. **–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ:** –£–ø—Ä–æ—Å—Ç–∏—Ç—å flow - —É–±—Ä–∞—Ç—å TravelSelection, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ MapScene

## –§–∞–π–ª—ã –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞:

- `MVP_TEST_INSTRUCTIONS.md` - –¥–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é
- `MVP_CORE_DESIGN.md` - –¥–∏–∑–∞–π–Ω MVP
- `FEATURES_CATALOG.md` - –∫–∞—Ç–∞–ª–æ–≥ –≤—Å–µ—Ö —Ñ–∏—á —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏ –≤–∫–ª—é—á–µ–Ω–∏—è
- `MVP_ACTION_PLAN.md` - –ø–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (–≤—ã–ø–æ–ª–Ω–µ–Ω)

## –ò—Ç–æ–≥:

‚úÖ **–£–ø—Ä–æ—â–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ** - –≤—Å–µ —Å–∏—Å—Ç–µ–º—ã —Ä–µ—Å—É—Ä—Å–æ–≤ –æ—Ç–∫–ª—é—á–µ–Ω—ã
‚úÖ **–ö–æ–º–ø–∏–ª—è—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç** - 0 –æ—à–∏–±–æ–∫
‚úÖ **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –≥–æ—Ç–æ–≤–∞** - –ø–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É —Å—Ü–µ–Ω–∞–º–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
‚ö†Ô∏è **–ù—É–∂–Ω—ã —Ñ–∏–∫—Å –¥–ª—è –∏–≥—Ä—ã** - —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –≥–æ—Ä–æ–¥–æ–≤ –∏ —Ç—Ä–µ–∫–∏–Ω–≥ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞

**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** ~2-3 —á–∞—Å–∞ (–ø–ª–∞–Ω: 3.5 —á–∞—Å–∞)
**–°—Ç–∞—Ç—É—Å:** –ì–æ—Ç–æ–≤–æ –∫ —Ñ–∏–Ω–∞–ª—å–Ω—ã–º –ø—Ä–∞–≤–∫–∞–º –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é
