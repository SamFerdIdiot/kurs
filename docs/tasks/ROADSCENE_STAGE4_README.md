# –≠—Ç–∞–ø 4: RoadScene - –ö–∏–Ω–æ-—Ä–µ–∂–∏–º –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è

## –û–±–∑–æ—Ä

**RoadScene** ‚Äî —ç—Ç–æ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ü–µ–Ω–∞ –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–∏–Ω–æ-—Ä–µ–∂–∏–º–∞ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è –º–µ–∂–¥—É –ª–æ–∫–∞—Ü–∏—è–º–∏. –í –æ—Ç–ª–∏—á–∏–µ –æ—Ç SideViewScene (–≥–¥–µ –∏–≥—Ä–æ–∫ –∏–º–µ–µ—Ç –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å), RoadScene –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–∂–∏–º –ø—Ä–æ—Å–º–æ—Ç—Ä–∞**, –≥–¥–µ –∏–≥—Ä–æ–∫ –Ω–∞–±–ª—é–¥–∞–µ—Ç –∑–∞ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ–º –±–µ–∑ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–º.

## –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### 1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ (Cinema Mode)
- **–ù–µ—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è A/D**: –ò–≥—Ä–æ–∫ –Ω–µ –º–æ–∂–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–º
- **–ê–≤—Ç–æ–ø—Ä–æ–∫—Ä—É—Ç–∫–∞**: –°—Ü–µ–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ—Ç—Å—è —Å –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–π —Å–∫–æ—Ä–æ—Å—Ç—å—é
- **–§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫–∞–º–µ—Ä–∞**: –ö–∞–º–µ—Ä–∞ —Å–ª–µ–¥—É–µ—Ç –∑–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- **–ù–µ–ª—å–∑—è –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å**: –ò–≥—Ä–æ–∫ –¥–æ–ª–∂–µ–Ω –Ω–∞–±–ª—é–¥–∞—Ç—å –∑–∞ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ–º –¥–æ –∫–æ–Ω—Ü–∞

### 2. –ú–Ω–æ–≥–æ—Å–ª–æ–π–Ω—ã–π –ø–∞—Ä–∞–ª–ª–∞–∫—Å-—Ñ–æ–Ω
RoadScene —Ä–µ–∞–ª–∏–∑—É–µ—Ç 7-—Å–ª–æ–π–Ω—É—é —Å–∏—Å—Ç–µ–º—É —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —ç—Ñ—Ñ–µ–∫—Ç–∞ –≥–ª—É–±–∏–Ω—ã:

#### –°–ª–æ–π 1: –§–æ–Ω–æ–≤–æ–µ –Ω–µ–±–æ –∏ –≥–æ—Ä—ã
```cpp
- –ü–æ–∑–∏—Ü–∏—è: –°–∞–º—ã–π –¥–∞–ª—å–Ω–∏–π —Å–ª–æ–π
- –ü–∞—Ä–∞–ª–ª–∞–∫—Å: 0.1x (–¥–≤–∏–∂–µ—Ç—Å—è –º–µ–¥–ª–µ–Ω–Ω–µ–µ –≤—Å–µ–≥–æ)
- –≠–ª–µ–º–µ–Ω—Ç—ã:
  * –ù–µ–±–æ (–≥–æ–ª—É–±–æ–π —Ü–≤–µ—Ç, RGB: 135, 206, 235)
  * –ì–æ—Ä—ã (—Å–µ—Ä–æ-–≥–æ–ª—É–±–æ–π, RGB: 80, 100, 120)
- –†–∞–∑–º–µ—Ä: 1366√ó370 –ø–∏–∫—Å–µ–ª–µ–π
```

#### –°–ª–æ–π 2: –•–æ–ª–º—ã –∏ –¥–µ—Ä–µ–≤—å—è
```cpp
- –ü–æ–∑–∏—Ü–∏—è: –°—Ä–µ–¥–Ω–∏–π –ø–ª–∞–Ω
- –ü–∞—Ä–∞–ª–ª–∞–∫—Å: 0.3x (—Å—Ä–µ–¥–Ω—è—è —Å–∫–æ—Ä–æ—Å—Ç—å)
- –≠–ª–µ–º–µ–Ω—Ç—ã:
  * –•–æ–ª–º—ã (–∑–µ–ª—ë–Ω—ã–π, RGB: 100, 140, 100)
  * –î–µ—Ä–µ–≤—å—è (—Ç—ë–º–Ω–æ-–∑–µ–ª—ë–Ω—ã–π, RGB: 60, 100, 60)
- –†–∞–∑–º–µ—Ä: 1366√ó180 –ø–∏–∫—Å–µ–ª–µ–π
```

#### –°–ª–æ–π 3: –°—Ç—Ä—É–∫—Ç—É—Ä—ã (–ø—Ä–æ—Ü–µ–¥—É—Ä–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è)
```cpp
- –ü–æ–∑–∏—Ü–∏—è: –ü–µ—Ä–µ–¥–Ω–∏–π –ø–ª–∞–Ω –¥–æ—Ä–æ–≥–∏
- –ü–∞—Ä–∞–ª–ª–∞–∫—Å: 1.0x (–¥–≤–∏–∂–µ—Ç—Å—è –≤–º–µ—Å—Ç–µ —Å –∫–∞–º–µ—Ä–æ–π)
- –°–∏—Å—Ç–µ–º–∞: StructurePlacement
- 8 —Ç–∏–ø–æ–≤ —Å—Ç—Ä—É–∫—Ç—É—Ä:
  1. –ó–∞–ø—Ä–∞–≤–∫–∞ (Gas Station)
  2. –ú–∞–≥–∞–∑–∏–Ω (Store)
  3. –ì–∞—Ä–∞–∂ (Garage)
  4. –ú–æ—Ç–µ–ª—å (Motel)
  5. –ó–∞–∫—É—Å–æ—á–Ω–∞—è (Diner)
  6. –ú–∞—Å—Ç–µ—Ä—Å–∫–∞—è (Mechanic)
  7. –ú–µ—Å—Ç–æ –æ—Ç–¥—ã—Ö–∞ (Rest Stop)
  8. –ë–∏–ª–±–æ—Ä–¥ (Billboard)
```

#### –°–ª–æ–π 4: –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç (Traffic System)
```cpp
- –í—Å—Ç—Ä–µ—á–Ω—ã–µ –º–∞—à–∏–Ω—ã (oncoming vehicles)
- –û–±–≥–æ–Ω—è—é—â–∏–µ –º–∞—à–∏–Ω—ã (passing vehicles)
- –ü—Ä–æ—Ü–µ–¥—É—Ä–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–∞–∂–¥—ã–µ 3 —Å–µ–∫—É–Ω–¥—ã
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ –∑–∞ –ø—Ä–µ–¥–µ–ª–∞–º–∏ —ç–∫—Ä–∞–Ω–∞
```

#### –°–ª–æ–π 5: –î–æ—Ä–æ–≥–∞ –∏ –∞–≤—Ç–æ–º–æ–±–∏–ª—å –∏–≥—Ä–æ–∫–∞
```cpp
- –î–æ—Ä–æ–≥–∞ —Å –∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Ä–∞–∑–º–µ—Ç–∫–æ–π
- –ê–≤—Ç–æ–º–æ–±–∏–ª—å –∏–≥—Ä–æ–∫–∞ –≤ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏ (300, 520)
- –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ–ª–æ—Å –¥–æ—Ä–æ–≥–∏
```

#### –°–ª–æ–π 6: –ü–æ–ª–æ—Å–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
```cpp
- –í–∏–∑—É–∞–ª—å–Ω–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è
- –ü—Ä–æ—Ü–µ–Ω—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (0-100%)
- –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ: –≤–µ—Ä—Ö–Ω—è—è —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è —á–∞—Å—Ç—å —ç–∫—Ä–∞–Ω–∞
- –†–∞–∑–º–µ—Ä: 400x30 –ø–∏–∫—Å–µ–ª–µ–π
```

#### –°–ª–æ–π 7: HUD Panel
```cpp
- –¢–æ–ø–ª–∏–≤–æ, —ç–Ω–µ—Ä–≥–∏—è, –¥–µ–Ω—å–≥–∏
- –°–∫–æ—Ä–æ—Å—Ç—å –∏ –æ–¥–æ–º–µ—Ç—Ä
- –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –¥–≤–∏–≥–∞—Ç–µ–ª—è
- –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
```

### 3. –°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è:**
```cpp
float m_journeyDistance;      // –û–±—â–µ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ (—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∏–∑–≤–Ω–µ)
float m_currentDistance;      // –ü—Ä–æ–π–¥–µ–Ω–Ω–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ
float m_travelSpeed;          // –°–∫–æ—Ä–æ—Å—Ç—å –∞–≤—Ç–æ–ø—Ä–æ–∫—Ä—É—Ç–∫–∏ (100.0f –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
```

**–†–∞—Å—á—ë—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å–∞:**
```cpp
float progress = m_currentDistance / m_journeyDistance;
// Progress bar –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
// –ü—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è –ø—Ä–∏ progress >= 1.0
```

### 4. –°–∏—Å—Ç–µ–º–∞ —Å–ª—É—á–∞–π–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π

**Event System Integration:**
```cpp
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–±—ã—Ç–∏–π –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥ (m_eventCheckInterval)
- –®–∞–Ω—Å —Å–æ–±—ã—Ç–∏—è: 20%
- –ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ —Å–æ–±—ã—Ç–∏—è:
  1. –ê–≤—Ç–æ–ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –ø—Ä–∏–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è
  2. –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è CinematicEventScene
  3. –ü—Ä–∏–º–µ–Ω—è—é—Ç—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ–±—ã—Ç–∏—è
  4. –ü—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ –≤–æ–∑–æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
```

### 5. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞–º–∏

**–†–∞—Å—Ö–æ–¥ —Ç–æ–ø–ª–∏–≤–∞:**
```cpp
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—Ö–æ–¥: 0.5% –≤ —Å–µ–∫—É–Ω–¥—É
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Ä–æ–≤–Ω—è —Ç–æ–ø–ª–∏–≤–∞ –∫–∞–∂–¥—ã–π –∫–∞–¥—Ä
- –ü—Ä–∏ –Ω—É–ª–µ–≤–æ–º —Ç–æ–ø–ª–∏–≤–µ -> –ø–µ—Ä–µ—Ö–æ–¥ –∫ GAME_OVER
```

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å PlayerState:**
```cpp
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å HUD –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤—Å–µ—Ö —Ä–µ—Å—É—Ä—Å–æ–≤ (—Ç–æ–ø–ª–∏–≤–æ, —ç–Ω–µ—Ä–≥–∏—è, –¥–µ–Ω—å–≥–∏)
- –û–¥–æ–º–µ—Ç—Ä –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–æ–π–¥–µ–Ω–Ω–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ
```

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∫–ª–∞—Å—Å–∞

### –ó–∞–≥–æ–ª–æ–≤–æ—á–Ω—ã–π —Ñ–∞–π–ª (RoadScene.h)

```cpp
class RoadScene : public Scene {
public:
    RoadScene();
    ~RoadScene();
    
    // Scene interface
    void handleInput(const sf::Event& event) override;
    void update(float deltaTime) override;
    void render(sf::RenderWindow& window) override;
    SceneType getNextScene() const override;
    bool isFinished() const override;
    
    // Journey configuration
    void setJourneyDistance(float distance);
    void setDestination(SceneType destination);
    
private:
    // State
    bool m_isFinished;
    SceneType m_nextScene;
    
    // Journey progress
    float m_journeyDistance;
    float m_currentDistance;
    float m_travelSpeed;
    
    // Camera and player
    float m_cameraX;
    PlayerState* m_playerState;
    float m_playerCarX;
    float m_playerCarY;
    
    // Rendering layers (1-7)
    // ... layer components ...
    
    // Systems
    std::unique_ptr<StructurePlacement> m_structurePlacement;
    std::unique_ptr<HUDPanel> m_hudPanel;
    
    // Helper methods
    void initializeLayers();
    void updateAutoScroll(float deltaTime);
    void renderBackground(sf::RenderWindow& window);
    // ... other methods ...
};
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –°–æ–∑–¥–∞–Ω–∏–µ –∏ –∑–∞–ø—É—Å–∫ RoadScene

```cpp
// –í SceneManager –∏–ª–∏ –¥—Ä—É–≥–æ–π —Å—Ü–µ–Ω–µ:

// 1. –°–æ–∑–¥–∞—Ç—å RoadScene
auto roadScene = std::make_unique<RoadScene>();

// 2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è
roadScene->setJourneyDistance(1500.0f);  // 1500 –µ–¥–∏–Ω–∏—Ü —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è
roadScene->setDestination(SceneType::TOWN);  // –ü—É–Ω–∫—Ç –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è

// 3. –°—Ü–µ–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—á–Ω—ë—Ç –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ
// –ò–≥—Ä–æ–∫ –Ω–∞–±–ª—é–¥–∞–µ—Ç –∑–∞ –∞–≤—Ç–æ–ø—Ä–æ–∫—Ä—É—Ç–∫–æ–π
// –°–æ–±—ã—Ç–∏—è –º–æ–≥—É—Ç –ø—Ä–µ—Ä—ã–≤–∞—Ç—å –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ
// –ü–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –ø–µ—Ä–µ—Ö–æ–¥ –∫ m_nextScene
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–æ–π —Å–æ–±—ã—Ç–∏–π

```cpp
// –ü—Ä–∏–º–µ—Ä —Å–æ–±—ã—Ç–∏—è –≤–æ –≤—Ä–µ–º—è –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è:
void RoadScene::updateEventSystem(float deltaTime) {
    m_eventTimer += deltaTime;
    
    if (m_eventTimer >= m_eventCheckInterval) {
        m_eventTimer = 0.0f;
        
        // 20% —à–∞–Ω—Å —Å–æ–±—ã—Ç–∏—è
        if (rand() % 100 < 20) {
            // –ü—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∞–≤—Ç–æ–ø—Ä–æ–∫—Ä—É—Ç–∫—É
            // –û—Ç–∫—Ä—ã—Ç—å CinematicEventScene
            // –ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
            // –í–æ–∑–æ–±–Ω–æ–≤–∏—Ç—å –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ
        }
    }
}
```

## –û—Ç–ª–∏—á–∏—è –æ—Ç SideViewScene

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ | RoadScene (Cinema) | SideViewScene (Interactive) |
|----------------|-------------------|----------------------------|
| –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ A/D | ‚ùå –û—Ç–∫–ª—é—á–µ–Ω–æ | ‚úÖ –ü–æ–ª–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ |
| –ê–≤—Ç–æ–ø—Ä–æ–∫—Ä—É—Ç–∫–∞ | ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è | ‚ùå –†—É—á–Ω–∞—è |
| –¶–µ–ª—å | –ö–∏–Ω–æ-—Ä–µ–∂–∏–º –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è | –ò–≥—Ä–æ–≤–æ–π —Ä–µ–∂–∏–º |
| –°–æ–±—ã—Ç–∏—è | –°–ª—É—á–∞–π–Ω—ã–µ, –ø—Ä–µ—Ä—ã–≤–∞—é—Ç | –ü–æ —Ç—Ä–∏–≥–≥–µ—Ä–∞–º –∏–≥—Ä–æ–∫–∞ |
| –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ | –¢–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä | –ü–æ–ª–Ω–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ |
| –ú–µ–Ω—é –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è | ‚ùå –ù–µ—Ç | ‚úÖ –î–∞ (InteractionMenu) |
| –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä | ‚úÖ –î–∞ | ‚ùå –ù–µ—Ç |

## –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ [====Progress Bar 45%=====>                  ]                   ‚îÇ  <- –°–ª–æ–π 6: Progress
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                  ‚îÇ
‚îÇ   ‚òÅÔ∏è  ‚òÅÔ∏è      ‚òÅÔ∏è                ‚òÅÔ∏è          ‚òÅÔ∏è                   ‚îÇ  <- –°–ª–æ–π 1: Sky
‚îÇ    üèîÔ∏è  üèîÔ∏è                  üèîÔ∏è       üèîÔ∏è                          ‚îÇ  <- –°–ª–æ–π 1: Mountains
‚îÇ     üå≤  üå≤      ‚õΩGAS        üå≤                                   ‚îÇ  <- –°–ª–æ–π 2-3: Hills, Structures
‚îÇ‚îÄ ‚îÄ ‚îÄ ‚îÄ ‚îÄ ‚îÄ ‚îÄ ‚îÄ ‚îÄ ‚îÄ ‚îÄ ‚îÄ ‚îÄ ‚îÄ ‚îÄ ‚îÄ ‚îÄ ‚îÄ ‚îÄ ‚îÄ ‚îÄ ‚îÄ ‚îÄ ‚îÄ ‚îÄ ‚îÄ ‚îÄ ‚îÄ ‚îÄ ‚îÄ‚îÇ  <- –°–ª–æ–π 5: Road
‚îÇ         üöó‚Üí              ‚Üêüöô                                     ‚îÇ  <- –°–ª–æ–π 4-5: Traffic, Player
‚îÇ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚îÇ
‚îÇ [E:‚ñà‚ñà‚ñà‚ñà‚ñë][¬•200] [SPD:100][ODO:450] [F:‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë][T:75¬∞]         ‚îÇ  <- –°–ª–æ–π 7: HUD
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ –≤–ø—Ä–∞–≤–æ ‚Üí‚Üí‚Üí
–ù–µ—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è, —Ç–æ–ª—å–∫–æ –Ω–∞–±–ª—é–¥–µ–Ω–∏–µ
–°–æ–±—ã—Ç–∏—è –º–æ–≥—É—Ç –ø—Ä–µ—Ä—ã–≤–∞—Ç—å –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ
```

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ü–∞—Ä–∞–ª–ª–∞–∫—Å-—Å–∫—Ä–æ–ª–ª–∏–Ω–≥

```cpp
float calculateParallaxOffset(float parallaxSpeed) const {
    // –†–∞—Å—á—ë—Ç —Å–º–µ—â–µ–Ω–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–æ–∑–∏—Ü–∏–∏ –∫–∞–º–µ—Ä—ã
    float offset = m_cameraX * parallaxSpeed;
    
    // –ë–µ—Å—à–æ–≤–Ω–æ–µ –∑–∞—Ü–∏–∫–ª–∏–≤–∞–Ω–∏–µ
    float width = (parallaxSpeed < 0.2f) ? (1366.0f * 3) : (1366.0f * 2);
    return fmod(offset, width);
}

// –°–ª–æ–π 1: 0.1x - –¥–≤–∏–∂–µ—Ç—Å—è –æ—á–µ–Ω—å –º–µ–¥–ª–µ–Ω–Ω–æ
// –°–ª–æ–π 2: 0.3x - –¥–≤–∏–∂–µ—Ç—Å—è –º–µ–¥–ª–µ–Ω–Ω–æ
// –°–ª–æ–π 3+: 1.0x - –¥–≤–∏–∂–µ—Ç—Å—è —Å –∫–∞–º–µ—Ä–æ–π
```

### –°–∏—Å—Ç–µ–º–∞ —Ç—Ä–∞—Ñ–∏–∫–∞

```cpp
void spawnVehicle() {
    Vehicle vehicle;
    
    // –°–ª—É—á–∞–π–Ω—ã–π –≤—ã–±–æ—Ä: –≤—Å—Ç—Ä–µ—á–Ω–∞—è –∏–ª–∏ –æ–±–≥–æ–Ω—è—é—â–∞—è
    bool oncoming = (rand() % 2 == 0);
    vehicle.isOncoming = oncoming;
    
    if (oncoming) {
        // –í—Å—Ç—Ä–µ—á–Ω–∞—è –º–∞—à–∏–Ω–∞ - —Å–ø—Ä–∞–≤–∞ –Ω–∞ –≤—Å—Ç—Ä–µ—á–Ω–æ–π –ø–æ–ª–æ—Å–µ
        vehicle.x = m_cameraX + 1500.0f + (rand() % 500);
        vehicle.y = 480.0f;
        vehicle.speed = 80.0f + (rand() % 40);
        vehicle.shape.setFillColor(sf::Color::Blue);
    } else {
        // –û–±–≥–æ–Ω—è—é—â–∞—è –º–∞—à–∏–Ω–∞ - —Å–∑–∞–¥–∏ –Ω–∞ –ø–æ–ø—É—Ç–Ω–æ–π –ø–æ–ª–æ—Å–µ
        vehicle.x = m_cameraX - 500.0f - (rand() % 500);
        vehicle.y = 600.0f;
        vehicle.speed = m_travelSpeed + 20.0f + (rand() % 30);
        vehicle.shape.setFillColor(sf::Color::Green);
    }
    
    m_vehicles.push_back(vehicle);
}
```

### –ê–Ω–∏–º–∞—Ü–∏—è –¥–æ—Ä–æ–∂–Ω–æ–π —Ä–∞–∑–º–µ—Ç–∫–∏

```cpp
void updateRoadAnimation(float deltaTime) {
    m_roadLineOffset += m_travelSpeed * deltaTime;
    
    // –ó–∞—Ü–∏–∫–ª–∏–≤–∞–Ω–∏–µ –∫–∞–∂–¥—ã–µ 100 –ø–∏–∫—Å–µ–ª–µ–π
    if (m_roadLineOffset > 100.0f) {
        m_roadLineOffset -= 100.0f;
    }
}

// –í —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–µ:
for (float x = 0.0f; x < 1366.0f; x += 100.0f) {
    m_roadLine1.setPosition(x - m_roadLineOffset, 530.0f);
    window.draw(m_roadLine1);
}
```

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∏–≥—Ä–æ–≤–æ–π –ª–æ–≥–∏–∫–æ–π

### –ü–µ—Ä–µ—Ö–æ–¥ –∫ RoadScene

```cpp
// –ò–∑ –∫–∞—Ä—Ç—ã –º–∏—Ä–∞ –∏–ª–∏ –¥—Ä—É–≥–æ–π —Å—Ü–µ–Ω—ã:
class WorldMapScene {
    void onRouteSelected(int nodeFrom, int nodeTo) {
        float distance = calculateDistance(nodeFrom, nodeTo);
        
        // –°–æ–∑–¥–∞—Ç—å RoadScene –¥–ª—è –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è
        auto roadScene = std::make_unique<RoadScene>();
        roadScene->setJourneyDistance(distance);
        roadScene->setDestination(SceneType::TOWN);
        
        // SceneManager –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—Å—è –Ω–∞ RoadScene
        m_nextScene = SceneType::ROAD;
        m_isFinished = true;
    }
};
```

### –ü–µ—Ä–µ—Ö–æ–¥ –∏–∑ RoadScene

```cpp
// RoadScene –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è –ø—Ä–∏:
bool isJourneyComplete() const {
    return m_currentDistance >= m_journeyDistance;
}

// –í update():
if (isJourneyComplete()) {
    m_isFinished = true;
    // m_nextScene —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω —á–µ—Ä–µ–∑ setDestination()
}
```

## –ë—É–¥—É—â–∏–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è

### –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:
1. **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –ø–æ–≥–æ–¥–∞**: –î–æ–∂–¥—å, —Ç—É–º–∞–Ω, —Ä–∞–∑–Ω–æ–µ –≤—Ä–µ–º—è —Å—É—Ç–æ–∫
2. **–ë–æ–ª—å—à–µ —Ç–∏–ø–æ–≤ —Å–æ–±—ã—Ç–∏–π**: –ü–æ–ª–∏—Ü–∏—è, –∞–≤–∞—Ä–∏–∏, –≤—Å—Ç—Ä–µ—á–∏
3. **–ê–Ω–∏–º–∞—Ü–∏—è –ø–µ–π–∑–∞–∂–∞**: –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–µ—Ä–µ–≤—å—è, –æ–±–ª–∞–∫–∞
4. **–ó–≤—É–∫–æ–≤–æ–µ —Å–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏–µ**: –ó–≤—É–∫–∏ –¥–≤–∏–≥–∞—Ç–µ–ª—è, –¥–æ—Ä–æ–≥–∏, —Ä–∞–¥–∏–æ
5. **–î–∏–∞–ª–æ–≥–∏ –≤ –º–∞—à–∏–Ω–µ**: –†–∞–∑–≥–æ–≤–æ—Ä—ã —Å –ø–æ–ø—É—Ç—á–∏–∫–∞–º–∏ (NPC)
6. **–ö–Ω–æ–ø–∫–∞ –ø—Ä–æ–ø—É—Å–∫–∞**: –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –±—ã—Å—Ç—Ä—ã–π –ø—Ä–æ–ø—É—Å–∫ (—Å —Ä–∞—Å—Ö–æ–¥–æ–º —Ä–µ—Å—É—Ä—Å–æ–≤)

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**RoadScene** ‚Äî —ç—Ç–æ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∫–∏–Ω–æ-—Ä–µ–∂–∏–º–∞ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è, –∫–æ—Ç–æ—Ä–∞—è:
- ‚úÖ –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∏–º–º–µ—Ä—Å–∏–≤–Ω—ã–π –æ–ø—ã—Ç –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π –º–Ω–æ–≥–æ—Å–ª–æ–π–Ω—ã–π –ø–∞—Ä–∞–ª–ª–∞–∫—Å
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å —Å–∏—Å—Ç–µ–º–æ–π —Å–æ–±—ã—Ç–∏–π
- ‚úÖ –£–ø—Ä–∞–≤–ª—è–µ—Ç —Ä–µ—Å—É—Ä—Å–∞–º–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- ‚úÖ –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≤–∏–∑—É–∞–ª—å–Ω—É—é –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å —á–µ—Ä–µ–∑ HUD –∏ –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä

–≠—Ç–∞ —Å—Ü–µ–Ω–∞ —è–≤–ª—è–µ—Ç—Å—è –∫–ª—é—á–µ–≤—ã–º —ç–ª–µ–º–µ–Ω—Ç–æ–º –∏–≥—Ä–æ–≤–æ–≥–æ —Ü–∏–∫–ª–∞, —Å–≤—è–∑—ã–≤–∞—é—â–∏–º —Ä–∞–∑–Ω—ã–µ –ª–æ–∫–∞—Ü–∏–∏ –∏ —Å–æ–∑–¥–∞—é—â–∏–º –æ—â—É—â–µ–Ω–∏–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è –ø–æ –∏–≥—Ä–æ–≤–æ–º—É –º–∏—Ä—É.

---

**–°—Ç–∞—Ç—É—Å**: ‚úÖ **–ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ**  
**–§–∞–π–ª—ã**: `include/RoadScene.h`, `src/RoadScene.cpp`  
**–í–µ—Ä—Å–∏—è**: 1.0  
**–î–∞—Ç–∞**: –ù–æ—è–±—Ä—å 2025
